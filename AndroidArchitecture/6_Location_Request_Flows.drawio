<mxfile host="app.diagrams.net" modified="2026-01-03T00:00:00.000Z" agent="Claude" version="22.0.0">
  <diagram name="Location Request Flows" id="loc-flows">
    <mxGraphModel dx="1600" dy="1200" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1400" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Title -->
        <mxCell id="title" value="Location Request Flows &amp; Scenarios" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="500" y="10" width="600" height="40" as="geometry" />
        </mxCell>

        <!-- Scenario 1: High Accuracy Location -->
        <mxCell id="s1-title" value="1. High Accuracy Location Request (Navigation App)" style="text;html=1;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="60" width="720" height="30" as="geometry" />
        </mxCell>

        <!-- S1 Components -->
        <mxCell id="s1-app" value="Maps App" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="100" y="120" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="s1-api" value="Location API&#xa;HIGH_ACCURACY" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="100" y="190" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="s1-lms" value="LocationMgr&#xa;Service" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="100" y="260" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="s1-gnss" value="GNSS&#xa;Provider" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="100" y="330" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="s1-hal" value="GNSS HAL" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="100" y="400" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="s1-pe" value="Position&#xa;Engine" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcccc;strokeColor=#cc0000;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="100" y="470" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="s1-sat" value="GPS/GNSS&#xa;Satellites" style="ellipse;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="100" y="540" width="120" height="60" as="geometry" />
        </mxCell>

        <!-- S1 Arrows -->
        <mxCell id="s1-arr1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#6c8ebf;endArrow=classic;" edge="1" parent="1" source="s1-app" target="s1-api">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="s1-arr2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#d6b656;endArrow=classic;" edge="1" parent="1" source="s1-api" target="s1-lms">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="s1-arr3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#b85450;endArrow=classic;" edge="1" parent="1" source="s1-lms" target="s1-gnss">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="s1-arr4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#82b366;endArrow=classic;" edge="1" parent="1" source="s1-gnss" target="s1-hal">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="s1-arr5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#9673a6;endArrow=classic;" edge="1" parent="1" source="s1-hal" target="s1-pe">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="s1-arr6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#cc0000;endArrow=classic;startArrow=classic;" edge="1" parent="1" source="s1-pe" target="s1-sat">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- S1 Response -->
        <mxCell id="s1-resp" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#009900;endArrow=classic;dashed=1;dashPattern=8 8;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="s1-sat" target="s1-app">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="260" y="570" />
              <mxPoint x="260" y="145" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="s1-resp-lbl" value="Location Update&#xa;Lat/Lon: ±3m&#xa;Update: 1 Hz" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontColor=#009900;fontStyle=1" vertex="1" connectable="0" parent="s1-resp">
          <mxGeometry x="-0.2" y="1" relative="1" as="geometry">
            <mxPoint x="30" y="-160" as="offset" />
          </mxGeometry>
        </mxCell>

        <!-- S1 Details -->
        <mxCell id="s1-details" value="Request Parameters:&#xa;&#xa;priority: HIGH_ACCURACY&#xa;interval: 1000 ms&#xa;fastestInterval: 500 ms&#xa;smallestDisplacement: 0 m&#xa;&#xa;Provider: GPS/GNSS&#xa;Accuracy: 3-5 meters&#xa;Power: High (100+ mW)&#xa;Latency: Low (~1 sec)&#xa;&#xa;Use Cases:&#xa;- Turn-by-turn navigation&#xa;- Real-time tracking&#xa;- AR applications" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;align=left;verticalAlign=top;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="320" y="120" width="400" height="220" as="geometry" />
        </mxCell>

        <!-- Scenario 2: Balanced Power -->
        <mxCell id="s2-title" value="2. Balanced Power Location Request (Weather App)" style="text;html=1;strokeColor=#82b366;fillColor=#d5e8d4;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="800" y="60" width="720" height="30" as="geometry" />
        </mxCell>

        <!-- S2 Components -->
        <mxCell id="s2-app" value="Weather App" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="860" y="120" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="s2-api" value="Location API&#xa;BALANCED" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="860" y="190" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="s2-lms" value="LocationMgr&#xa;Service" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="860" y="260" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="s2-multi" value="Multi-Source&#xa;Decision" style="rhombus;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="860" y="330" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="s2-gnss" value="GNSS&#xa;(Occasional)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="740" y="440" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="s2-network" value="Network&#xa;(WiFi/Cell)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="870" y="440" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="s2-passive" value="Passive&#xa;(Piggyback)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="1000" y="440" width="100" height="50" as="geometry" />
        </mxCell>

        <!-- S2 Arrows -->
        <mxCell id="s2-arr1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#6c8ebf;endArrow=classic;" edge="1" parent="1" source="s2-app" target="s2-api">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="s2-arr2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#d6b656;endArrow=classic;" edge="1" parent="1" source="s2-api" target="s2-lms">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="s2-arr3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#b85450;endArrow=classic;" edge="1" parent="1" source="s2-lms" target="s2-multi">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="s2-arr4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#82b366;endArrow=classic;" edge="1" parent="1" source="s2-multi" target="s2-gnss">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="s2-arr5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#82b366;endArrow=classic;" edge="1" parent="1" source="s2-multi" target="s2-network">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="s2-arr6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#82b366;endArrow=classic;" edge="1" parent="1" source="s2-multi" target="s2-passive">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- S2 Details -->
        <mxCell id="s2-details" value="Request Parameters:&#xa;&#xa;priority: BALANCED_POWER&#xa;interval: 300000 ms (5 min)&#xa;fastestInterval: 60000 ms&#xa;&#xa;Provider: Fused (Multi-source)&#xa;Accuracy: 10-100 meters&#xa;Power: Medium (10-30 mW)&#xa;&#xa;Strategy:&#xa;- Network location primary&#xa;- GNSS for refinement&#xa;- Passive when available&#xa;&#xa;Use Cases:&#xa;- Weather updates&#xa;- Local news&#xa;- Store locators" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;align=left;verticalAlign=top;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1160" y="120" width="300" height="270" as="geometry" />
        </mxCell>

        <!-- Scenario 3: Low Power -->
        <mxCell id="s3-title" value="3. Low Power Location Request (Background Tracking)" style="text;html=1;strokeColor=#9673a6;fillColor=#e1d5e7;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="630" width="720" height="30" as="geometry" />
        </mxCell>

        <!-- S3 Flow -->
        <mxCell id="s3-app" value="Fitness Tracker&#xa;(Background)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="80" y="690" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="s3-cell" value="Cell Tower&#xa;Location" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="240" y="690" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="s3-wifi" value="WiFi&#xa;Fingerprint" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="400" y="690" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="s3-geocode" value="Geocoding&#xa;Service" style="ellipse;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="560" y="685" width="120" height="60" as="geometry" />
        </mxCell>

        <!-- S3 Arrows -->
        <mxCell id="s3-arr1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#6c8ebf;endArrow=classic;" edge="1" parent="1" source="s3-app" target="s3-cell">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="s3-arr2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#82b366;endArrow=classic;" edge="1" parent="1" source="s3-cell" target="s3-wifi">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="s3-arr3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#d6b656;endArrow=classic;" edge="1" parent="1" source="s3-wifi" target="s3-geocode">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- S3 Details -->
        <mxCell id="s3-details" value="Request Parameters:&#xa;&#xa;priority: LOW_POWER&#xa;interval: 3600000 ms (1 hour)&#xa;&#xa;Provider: Network only&#xa;Accuracy: 100-1000 meters&#xa;Power: Very Low (1-5 mW)&#xa;&#xa;Technique:&#xa;1. Scan cell tower ID&#xa;2. Scan WiFi BSSID&#xa;3. Send to geocoding server&#xa;4. Receive approximate location&#xa;&#xa;No GNSS used!&#xa;&#xa;Use Cases:&#xa;- Background step counter&#xa;- Timezone detection&#xa;- Region-based content" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;align=left;verticalAlign=top;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="80" y="760" width="600" height="240" as="geometry" />
        </mxCell>

        <!-- Scenario 4: Geofencing -->
        <mxCell id="s4-title" value="4. Geofencing (Hardware-Accelerated)" style="text;html=1;strokeColor=#b85450;fillColor=#f8cecc;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="800" y="440" width="720" height="30" as="geometry" />
        </mxCell>

        <!-- S4 Flow -->
        <mxCell id="s4-app" value="Location Reminder&#xa;App" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="840" y="500" width="140" height="50" as="geometry" />
        </mxCell>
        <mxCell id="s4-geo-mgr" value="Geofence&#xa;Manager" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="840" y="570" width="140" height="50" as="geometry" />
        </mxCell>
        <mxCell id="s4-hal-geo" value="IGnssGeofencing&#xa;HAL" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="840" y="640" width="140" height="50" as="geometry" />
        </mxCell>
        <mxCell id="s4-hw-geo" value="Hardware&#xa;Geofence Engine" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcccc;strokeColor=#cc0000;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="840" y="710" width="140" height="50" as="geometry" />
        </mxCell>
        <mxCell id="s4-monitor" value="Continuous&#xa;Monitoring&#xa;(Offloaded)" style="ellipse;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="840" y="780" width="140" height="70" as="geometry" />
        </mxCell>

        <!-- S4 Arrows -->
        <mxCell id="s4-arr1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#6c8ebf;endArrow=classic;" edge="1" parent="1" source="s4-app" target="s4-geo-mgr">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="s4-arr1-lbl" value="addGeofence()" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fontColor=#0000cc;" vertex="1" connectable="0" parent="s4-arr1">
          <mxGeometry x="-0.2" y="1" relative="1" as="geometry">
            <mxPoint x="40" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="s4-arr2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#d6b656;endArrow=classic;" edge="1" parent="1" source="s4-geo-mgr" target="s4-hal-geo">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="s4-arr3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#82b366;endArrow=classic;" edge="1" parent="1" source="s4-hal-geo" target="s4-hw-geo">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="s4-arr4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#cc0000;endArrow=classic;" edge="1" parent="1" source="s4-hw-geo" target="s4-monitor">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- S4 Breach -->
        <mxCell id="s4-breach" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#ff0000;endArrow=classic;dashed=1;dashPattern=8 8;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="s4-monitor" target="s4-app">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1020" y="815" />
              <mxPoint x="1020" y="525" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="s4-breach-lbl" value="BREACH!&#xa;Wake App" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=12;fontColor=#ff0000;fontStyle=1" vertex="1" connectable="0" parent="s4-breach">
          <mxGeometry x="-0.2" y="1" relative="1" as="geometry">
            <mxPoint x="25" y="-90" as="offset" />
          </mxGeometry>
        </mxCell>

        <!-- S4 Details -->
        <mxCell id="s4-details" value="Geofence Setup:&#xa;&#xa;Latitude: 37.7749°N&#xa;Longitude: 122.4194°W&#xa;Radius: 100 meters&#xa;Transition: ENTER | EXIT&#xa;Loitering: 5 minutes&#xa;&#xa;Process:&#xa;1. App registers geofence&#xa;2. Offloaded to GNSS chipset&#xa;3. Chipset monitors continuously&#xa;4. App processor sleeps&#xa;5. On breach → Wake app&#xa;6. Trigger notification&#xa;&#xa;Power: ~1-3 mW&#xa;Capacity: ~100 geofences&#xa;&#xa;Use Cases:&#xa;- Location reminders&#xa;- Auto home/work detection&#xa;- Retail proximity alerts" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;align=left;verticalAlign=top;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1040" y="500" width="420" height="350" as="geometry" />
        </mxCell>

        <!-- Scenario 5: Emergency Location -->
        <mxCell id="s5-title" value="5. Emergency Location Service (ELS)" style="text;html=1;strokeColor=#cc0000;fillColor=#ffcccc;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="1030" width="720" height="30" as="geometry" />
        </mxCell>

        <!-- S5 Flow -->
        <mxCell id="s5-emergency" value="Emergency Call&#xa;(911/112)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcccc;strokeColor=#cc0000;fontStyle=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="80" y="1090" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="s5-bypass" value="Bypass&#xa;Permissions" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="260" y="1080" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="s5-force-gnss" value="Force&#xa;High-Accuracy&#xa;GNSS" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="420" y="1090" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="s5-rapid" value="Rapid Fix&#xa;(A-GNSS)&#xa;SUPL" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="580" y="1090" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="s5-psap" value="PSAP&#xa;(Emergency&#xa;Dispatch)" style="ellipse;whiteSpace=wrap;html=1;fillColor=#ffb3b3;strokeColor=#990000;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="740" y="1085" width="120" height="70" as="geometry" />
        </mxCell>

        <!-- S5 Arrows -->
        <mxCell id="s5-arr1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#cc0000;endArrow=classic;" edge="1" parent="1" source="s5-emergency" target="s5-bypass">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="s5-arr2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#d6b656;endArrow=classic;" edge="1" parent="1" source="s5-bypass" target="s5-force-gnss">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="s5-arr3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#82b366;endArrow=classic;" edge="1" parent="1" source="s5-force-gnss" target="s5-rapid">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="s5-arr4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#cc0000;endArrow=classic;" edge="1" parent="1" source="s5-rapid" target="s5-psap">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="s5-arr4-lbl" value="TTFF: 3-8s" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontColor=#cc0000;fontStyle=1" vertex="1" connectable="0" parent="s5-arr4">
          <mxGeometry x="-0.2" y="1" relative="1" as="geometry">
            <mxPoint x="5" y="-15" as="offset" />
          </mxGeometry>
        </mxCell>

        <!-- S5 Details -->
        <mxCell id="s5-details" value="Emergency Location Process:&#xa;&#xa;1. User dials emergency number&#xa;2. System detects emergency call&#xa;3. Bypass all location permissions&#xa;4. Force GNSS activation&#xa;5. Use all assistance (SUPL, XTRA)&#xa;6. Prioritize fix speed over power&#xa;7. Send location to PSAP&#xa;8. Continue updates during call&#xa;&#xa;Accuracy Target: ±50 meters&#xa;TTFF Target: <10 seconds&#xa;Power: Unrestricted&#xa;&#xa;Privacy:&#xa;- User notified after call&#xa;- Location not stored&#xa;- Only sent to PSAP&#xa;&#xa;Regulations:&#xa;- FCC E911 (USA)&#xa;- eCall (EU)&#xa;- Local emergency standards" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;align=left;verticalAlign=top;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="80" y="1180" width="780" height="260" as="geometry" />
        </mxCell>

        <!-- Scenario 6: GNSS Raw Measurements -->
        <mxCell id="s6-title" value="6. GNSS Raw Measurements (Research/RTK)" style="text;html=1;strokeColor=#10739e;fillColor=#b1ddf0;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="920" y="900" width="640" height="30" as="geometry" />
        </mxCell>

        <!-- S6 Flow -->
        <mxCell id="s6-app" value="Precision App&#xa;(Survey/Research)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="960" y="960" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="s6-meas-api" value="GNSS&#xa;Measurements&#xa;API" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="960" y="1040" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="s6-hal-meas" value="IGnssMeasure&#xa;ment HAL" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="960" y="1120" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="s6-me" value="Measurement&#xa;Engine" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="960" y="1200" width="140" height="60" as="geometry" />
        </mxCell>

        <!-- S6 Arrows -->
        <mxCell id="s6-arr1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#6c8ebf;endArrow=classic;" edge="1" parent="1" source="s6-app" target="s6-meas-api">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="s6-arr1-lbl" value="register&#xa;Callback()" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fontColor=#0000cc;" vertex="1" connectable="0" parent="s6-arr1">
          <mxGeometry x="-0.2" y="1" relative="1" as="geometry">
            <mxPoint x="30" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="s6-arr2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#d6b656;endArrow=classic;" edge="1" parent="1" source="s6-meas-api" target="s6-hal-meas">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="s6-arr3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#82b366;endArrow=classic;" edge="1" parent="1" source="s6-hal-meas" target="s6-me">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- S6 Data Flow -->
        <mxCell id="s6-data" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#009900;endArrow=classic;dashed=1;dashPattern=8 8;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="s6-me" target="s6-app">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1140" y="1230" />
              <mxPoint x="1140" y="990" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="s6-data-lbl" value="Raw Data Stream" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontColor=#009900;fontStyle=1" vertex="1" connectable="0" parent="s6-data">
          <mxGeometry x="-0.2" y="1" relative="1" as="geometry">
            <mxPoint x="35" y="-75" as="offset" />
          </mxGeometry>
        </mxCell>

        <!-- S6 Details -->
        <mxCell id="s6-details" value="Raw GNSS Measurements:&#xa;&#xa;GnssClock:&#xa;- TimeNanos&#xa;- FullBiasNanos&#xa;- DriftNanosPerSecond&#xa;&#xa;GnssMeasurement (per satellite):&#xa;- Svid (Satellite ID)&#xa;- ConstellationType&#xa;- Cn0DbHz (Signal strength)&#xa;- PseudorangeRateMetersPerSecond&#xa;- AccumulatedDeltaRangeMeters&#xa;- CarrierPhase&#xa;- ReceivedSvTimeNanos&#xa;&#xa;Update Rate: 1 Hz typical&#xa;&#xa;Applications:&#xa;- RTK positioning (cm accuracy)&#xa;- Precise Point Positioning&#xa;- Research &amp; development&#xa;- Indoor positioning algorithms&#xa;- Ionosphere studies&#xa;&#xa;Power: Same as normal GNSS" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;align=left;verticalAlign=top;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1180" y="960" width="340" height="380" as="geometry" />
        </mxCell>

        <!-- Comparison Table -->
        <mxCell id="comp-title" value="Location Request Comparison Matrix" style="text;html=1;strokeColor=#666666;fillColor=#f5f5f5;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=18;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="1300" width="1520" height="40" as="geometry" />
        </mxCell>

        <mxCell id="comp-table" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="40" y="1350" width="1520" height="30" as="geometry" />
        </mxCell>
        <mxCell id="comp-header" value="Priority Mode | Provider | Accuracy | Power | TTFF | Update Rate | Use Case" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="50" y="1355" width="1500" height="20" as="geometry" />
        </mxCell>

        <mxCell id="row1" value="HIGH_ACCURACY | GNSS | 3-5m | 100+ mW | 1-5s | 1 Hz | Navigation, AR" style="text;html=1;strokeColor=none;fillColor=#fff2cc;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="50" y="1390" width="1500" height="25" as="geometry" />
        </mxCell>
        <mxCell id="row2" value="BALANCED | Fused | 10-100m | 10-30 mW | 5-15s | 0.01 Hz | Weather, local services" style="text;html=1;strokeColor=none;fillColor=#d5e8d4;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="50" y="1425" width="1500" height="25" as="geometry" />
        </mxCell>
        <mxCell id="row3" value="LOW_POWER | Network | 100-1000m | 1-5 mW | 1-3s | 0.0003 Hz | Background tracking" style="text;html=1;strokeColor=none;fillColor=#e1d5e7;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="50" y="1460" width="1500" height="25" as="geometry" />
        </mxCell>
        <mxCell id="row4" value="GEOFENCE | HW Offload | 10-50m | 1-3 mW | N/A | Event | Location reminders" style="text;html=1;strokeColor=none;fillColor=#f8cecc;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="50" y="1495" width="1500" height="25" as="geometry" />
        </mxCell>
        <mxCell id="row5" value="EMERGENCY | GNSS+A-GNSS | <50m | Unlimited | 3-8s | 1 Hz | Emergency calls" style="text;html=1;strokeColor=none;fillColor=#ffcccc;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="50" y="1530" width="1500" height="25" as="geometry" />
        </mxCell>
        <mxCell id="row6" value="RAW_MEAS | GNSS | N/A (raw) | 100+ mW | 1-5s | 1 Hz | RTK, Research" style="text;html=1;strokeColor=none;fillColor=#b1ddf0;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="50" y="1565" width="1500" height="25" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
